USE [imfi-itms-test-uat-sql];
GO;

-- CREATE SCHEMA APP
-- CREATE SCHEMA WP

CREATE LOGIN [APP] WITH PASSWORD = 'e0LZ0G*#%B9)G9}P95';
CREATE LOGIN [WP] WITH PASSWORD = '3Sb2Cm}5Aj5Kt8'


CREATE USER [APP] 
    FOR LOGIN [APP]
    WITH DEFAULT_SCHEMA = APP;

CREATE USER [WP]
    FOR LOGIN [WP]
    WITH DEFAULT_SCHEMA = WP;




-- CREATE INDEX
    CREATE INDEX NC_BillToCustomerId ON DBO.BillToCustomer(BillToCustomerId);



--PERMISSION
GRANT SELECT, INSERT, UPDATE, DELETE ON APP.Driver_Document_Notifications TO APP;
GRANT SELECT, INSERT, UPDATE, DELETE ON APP.Driver_Documents TO APP;
GRANT SELECT, INSERT, UPDATE, DELETE ON APP.Driver_Move TO APP;
GRANT SELECT, INSERT, UPDATE, DELETE ON APP.Driver_Move TO APP;
GRANT SELECT, INSERT, UPDATE, DELETE ON WP.Email_LoginToken TO APP;

GRANT SELECT ON DBO.DRIVER TO APP;
GRANT SELECT ON DBO.GLOBALSETUP TO APP;
GRANT SELECT ON DBO.OrderLog TO APP;
GRANT SELECT ON DBO.OrderLogPickup TO APP;
GRANT SELECT ON DBO.OrderLogPickupMT TO APP;
GRANT SELECT ON DBO.OrderLogReturnMT TO APP;
GRANT SELECT ON DBO.OrderLogDelivery TO APP;
GRANT SELECT ON WP.v_Consignee TO APP;
GRANT SELECT ON WP.V_BillToCustomer TO APP;

GRANT SELECT ON DBO.PurchaseOrder TO APP;
GRANT SELECT, INSERT ON DBO.OrderLogDoc TO APP;



GRANT EXECUTE ON APP.sendEMessage TO APP;
GRANT EXECUTE ON APP.saveUserLogs TO APP;
GRANT EXECUTE ON APP.saveProDocument TO APP;
GRANT EXECUTE ON APP.getDriverUserInfoFromProNumber TO APP;
GRANT EXECUTE ON APP.updateDriverMoveStatus TO APP;
GRANT EXECUTE ON APP.updateContainerStatus TO APP;
GRANT EXECUTE ON APP.getDriverUserInfoFromProNumber TO APP;
GRANT EXECUTE ON APP.validateEmailToken TO APP;
GRANT EXECUTE ON APP.validateUser TO APP;
GRANT EXECUTE ON APP.getDriverContainers TO APP;